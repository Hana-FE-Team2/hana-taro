<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="./css/style.css" />
  </head>

  <body style="height: 100vh">
    <!-- container -->
    <div class="mainpage-container">
      <!-- frame -->
      <div class="mainpage-frame">
        <!-- <div class="backgroud"> -->
        <div class="mainpage-background">
          <!-- magicball -->
          <div class="mainpage-magicball magicball1"></div>
          <!-- cards -->
          <div id="mainpage-cards">
            <div class="mainpage-card back"></div>
            <div class="mainpage-card front"></div>
          </div>
          <div id="mainpage-cards" class="mainpage-card1">
            <div class="mainpage-card back"></div>
            <div class="mainpage-card front"></div>
          </div>
          <div id="mainpage-cards" class="mainpage-card2">
            <div class="mainpage-card back"></div>
            <div class="mainpage-card front"></div>
          </div>
          <div id="mainpage-cards" class="mainpage-card3">
            <div class="mainpage-card back"></div>
            <div class="mainpage-card front"></div>
          </div>
          <div id="mainpage-cards" class="mainpage-card4">
            <div class="mainpage-card back"></div>
            <div class="mainpage-card front"></div>
          </div>
          <!-- modal -->
          <div id="modal" class="modal"></div>
          <button id="open-modal" style="display: none"></button>
        </div>
      </div>
    </div>
  </body>
  <!-- jquery 사용 선언 -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
    integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <!-- js 연결 -->
  <!-- <script src="./jscript.js"></script> -->
  <script src="./js/app.js"></script>
  <script src="./js/modal.js"></script>
  <!-- 모달 메시지 -->
  <script type="text/javascript">
    var messages = [
      '안녕하세요....\n하나타로에 오신것을 환영합니다....',
      '당신의 금전운을 알고 싶다면...\n수정구를 클릭해주세요....',
    ];
    $(document).on('click', '.mainpage-magicball.magicball1', function (data) {
      $('#modal').fadeOut();
      loadNextContent('shuffle-card.html');
    
    });
  </script>
  <script>
    // 입움직임
    window.onload = function () {
      setTimeout(function () {
        background.classList.add('clicked');
      }, 2000);
    };

    // magicball js
    const magicBall = document.querySelector('.magicball1');
    // magicball에 마우스 올렸을 때
    magicBall.addEventListener('mouseover', () => {
      magicBall.classList.add('magicball-hover');
    });
    // magicball에 마우스 나갔을 때
    magicBall.addEventListener('mouseout', () => {
      magicBall.classList.remove('magicball-hover');
    });

    // mainpage-cards
    const cards = document.querySelectorAll('#mainpage-cards');
    const card = document.querySelectorAll('.mainpage-card');
    const background = document.querySelector('.mainpage-background');
    cards.forEach((ele) => {
      console.log(ele);
      // 카드 클릭 시
      ele.addEventListener('click', () => {
        const clickedCard = document.querySelectorAll(
          '#mainpage-cards.clicked'
        );
        ele.classList.contains('clicked')
          ? ele.classList.remove('clicked')
          : ele.classList.add('clicked');
        console.log(
          document.querySelectorAll('#mainpage-cards.clicked').length
        );
        // 카드를 4장 째 뒤집을 시
        if (clickedCard.length + 1 >= 4) {
          clickedCard.forEach((elem) => elem.classList.remove('clicked'));
          document
            .querySelector('#mainpage-cards.clicked')
            .classList.remove('clicked');
          messages = ['카드를 마음대로 만지지 말아주세요.....'];
          $('#open-modal').click();
          background.classList.remove('clicked');
          background.classList.contains('clicked')
            ? background.classList.remove('clicked')
            : background.classList.add('clicked');
        }
      });
    });
  </script>
</html>
